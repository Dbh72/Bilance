import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";import { getFirestore, doc, getDoc, addDoc, setDoc, updateDoc, deleteDoc, onSnapshot, collection, query, where, addDoc, getDocs } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';const firebaseConfig = JSON.parse(__firebase_config);const initialAuthToken = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;const app = initializeApp(firebaseConfig);const db = getFirestore(app);const auth = getAuth(app);onAuthStateChanged(auth, async (user) => {if (user) {console.log("User is signed in with UID:", user.uid);} else {console.log("No user is signed in. Attempting to sign in.");try {if (initialAuthToken) {await signInWithCustomToken(auth, initialAuthToken);} else {await signInAnonymously(auth);}} catch (error) {console.error("Error signing in:", error);}}});
